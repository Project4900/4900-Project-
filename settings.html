<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WeatherEase — Settings</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>WeatherEase Settings</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="weather.html">Weather</a>
      <a href="exit.html">Exit</a>
    </nav>
  </header>

  <main>
    <h2>Accessibility & Voice Settings</h2>
    <form aria-label="Accessibility settings" style="display:grid; gap:.75rem; max-width:600px;">
      <!-- Existing accessibility toggles -->
      <label><input type="checkbox" id="dark-mode" /> Dark mode</label>
      <label><input type="checkbox" id="big-text" /> Use larger text</label>
      <label><input type="checkbox" id="high-contrast" /> High contrast</label>
      <label><input type="checkbox" id="voice" /> Enable voice commands</label>
      <label>Units: <select id="units-select"> 
        <option value="metric">Metric (°C, m/s)</option>
        <option value="imperial">Imperial (°F, mph)</option></select>
      </label>


      <hr>

      <!-- New voice settings -->
      <h3>Voice Settings</h3>
      <label>
        Select Voice:
        <select id="voice-select"></select>
      </label>
      <label>
        Speech Rate: <input type="range" id="voice-rate" min="0.5" max="2" step="0.05">
      </label>
      <label>
        Pitch: <input type="range" id="voice-pitch" min="0" max="2" step="0.1">
      </label>

      <div id="voice-status">Current voice settings will appear here…</div>
    </form>
  </main>

  <script src="voice-control.js"></script>
  <script src="script.js"></script>
  <script>
  // =========================
  // Settings Page Voice Options
  // =========================
  document.addEventListener('DOMContentLoaded', () => {
      const voiceSelect = document.getElementById('voice-select');
      const rateInput = document.getElementById('voice-rate');
      const pitchInput = document.getElementById('voice-pitch');
      const statusDiv = document.getElementById('voice-status');

      // Populate voices
      function populateVoices() {
          const voices = window.speechSynthesis.getVoices();
          if (!voices.length) return;

          voiceSelect.innerHTML = '';
          voices.forEach(v => {
              const opt = document.createElement('option');
              opt.value = v.name;
              opt.textContent = `${v.name} (${v.lang})`;
              voiceSelect.appendChild(opt);
          });

          // Set saved voice
          const savedVoice = localStorage.getItem('voiceName');
          if (savedVoice) voiceSelect.value = savedVoice;
      }

      populateVoices();
      if ('speechSynthesis' in window) {
          window.speechSynthesis.onvoiceschanged = populateVoices;
      }

      // Load saved rate/pitch
      rateInput.value = parseFloat(localStorage.getItem('speechRate')) || 0.85;
      pitchInput.value = parseFloat(localStorage.getItem('speechPitch')) || 1;

      // Save changes
      voiceSelect.addEventListener('change', () => {
          localStorage.setItem('voiceName', voiceSelect.value);
          if (statusDiv) statusDiv.textContent = `Voice set to ${voiceSelect.value}`;
      });

      rateInput.addEventListener('input', () => {
          localStorage.setItem('speechRate', rateInput.value);
          if (statusDiv) statusDiv.textContent = `Speech rate set to ${rateInput.value}`;
      });

      pitchInput.addEventListener('input', () => {
          localStorage.setItem('speechPitch', pitchInput.value);
          if (statusDiv) statusDiv.textContent = `Pitch set to ${pitchInput.value}`;
      });
  });
  </script>
</body>
</html>
